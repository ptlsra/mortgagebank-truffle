<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply Insurance </title>
   
 
       
     
     
     <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/CustomerDashboard.css">
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>  -->

<script src="assets/jquery-3.2.1.min.js"></script>
      
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <!--  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>   -->

<script src="assets/jquery-ui-1.11.1/jquery-1.11.1.min.js"></script>

 
<!-- <script src="http://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>  -->

<script src="assets/jquery-ui-1.11.1/jquery-ui.min.js"></script>

<!-- <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />  -->

      <link rel="stylesheet" href="assets/jquery-ui-1.11.1/jquery-ui.css" />

<!--   <link rel="stylesheet" href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css"> -->

<link rel="stylesheet" href="assets/DataTables/datatables.min.css">
    
<!-- <script type="text/javascript" src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>  -->

<script type="text/javascript" src="assets/DataTables/datatables.min.js"></script>

 <!--  <script src="assets/js/GetQuote.js"></script> -->

     
      
    
    <style>

#namanyay-search-btn {
background:#120d7c;
color:white;
margin-top:19px;
font: 'trebuchet ms', trebuchet;
border-radius:0 5px 5px 0;
-moz-border-radius:0 5px 5px 0;
-webkit-border-radius:0 5px 5px 0;
-o-border-radius:0 5px 5px 0;
border:0 none;
font-weight:bold;
}
 

#namanyay-search-box {
background: #eee;
 border-radius:5px 0 0 5px;
-moz-border-radius:5px 0 0 5px;
-webkit-border-radius:5px 0 0 5px;
-o-border-radius:5px 0 0 5px;
border:0 none;
width:300px;
-webkit-transition: width 2s; /* For Safari 3.1 to 6.0 */
    transition: width 2s;
 }
</style>
    
   
</head>

<body id="main_body">
    
   
   

     <!--  
    Header -->
   
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<nav class="navbar navbar-default" id="nav_bar" style="background:#120d7c;">
        <div class="container-fluid">
            <div class="navbar-header" ><a class="navbar-brand navbar-link" href="BankAdmin.html"><i class="fa fa-bank" style="color:white;" id="bank_icon"></i><span id="bankName" style="color:white;"> ABC Bank</span></a>
                <button class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
            </div>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav navbar-right">
                                   <li role="presentation" id="f" style="margin-right:350px;"><a href="#" onclick="MyFunction();" style="color:white;">Personal Banking</a></li>
                                                   <li role="presentation" id="e" style="margin-right:450px;"><a href="#" onclick="MyFunction();" style="color:white;">Personal Banking</a></li>
                
                    <li role="presentation" id="a"><a href="#" style="color:white;" >About Us </a></li>
                    <li role="presentation" id="b"><a href="#" style="color:white;" >Customer Service</a></li>
                    <li role="presentation" id="c"><a href="#" style="color:white;" >Locations</a></li>
                    
                    <li role="presentation" id="d"><a href="LogOut.html"><i class="fa fa-lock" id="tx_icon" style="margin-right:8px;"></i>Logout</a></li>
                    
                    <li role="presentation" style="color:white;">
                    Search
<input id="namanyay-search-box" name="q" size="40" type="text" />
<button id="namanyay-search-btn"><i class="fa fa-search" aria-hidden="true"></i>
</button>
               </li>
                    
                    
                </ul>
            </div>
        </div>
    </nav>
   
   
    <nav class="navbar navbar-default" id="nav_bar2" style="background:#f3f1f1;">
        <div class="container-fluid" style="background:#f3f1f1;">
            
            <div class="collapse navbar-collapse" id="navcol-1" style="background:#f3f1f1;">
                <ul class="nav navbar-nav navbar-left" style="font-size:14px;" >
                              
                
                    <li  style="margin-right:8px;"><a href="#" style="color:black;">Online & Mobile Banking </a></li>
                    <li  style="margin-right:8px;"><a href="#" style="color:black;">Checking & Savings</a></li>
                    <li  style="margin-right:8px;"><a href="#" style="color:black;">Credit Cards & Prepaid Cards</a></li>
                    <li style="margin-right:8px;" ><a href="MortgageMain.html" style="color:black;">Mortgage & Refinance</a></li>
                    <li  style="margin-right:8px;"><a href="#" style="color:black;">Loans & Credit Lines</a></li>
                    <li  style="margin-right:8px;"><a href="#" style="color:black;">Wealth Management</a></li>
                    
                    
                    
                    
                    
                  
                    
                    
                </ul>
            </div>
        </div>
    </nav>
    
    
	


     
   <div class="imagebanner">
  <img src="assets/img/family.jpg" style="width:100%;">
  <div class="content">
    <h1>Welcome To Customer Transactions.</h1>
    <h3 id="vat">View All Transactions.</h3>
  </div>
</div>

    <!--  
    Second Section -->
            <button class="buttonLink" onclick="goBack()" style="margin-left:890px;margin-top:40px;">Go Back</button>
    
    
     <div class="container-fluid" id="main_container" style="margin-top:40px;width:850px;">
        
 <h3 style="color:#120d7c;text-align:left;margin-left:40px;">Current Status</h3>
 <table class="table table-bordered" style="color:black; margin-top:20px;width:800px;margin-left:45px;" id="infoTable2">
   
  
      <tr>
        <td>Loan Status</td>
        <td id="loanStatus" style="font-weight:bold;">Tax Documents Verified</td>
        <td>Current Action</td>
        <td id="currentAction" style="font-weight:bold;">Apply Insurance</td>
        
       
        
        
       
      </tr>
      
      </table>
        

<h2 style="color:#120d7c;text-align:left;margin-left:40px;">Mortgage Information</h2> 
   <!--<form  id='uploadForm2' action='GetQuote' method='post'>-->
   <form  id='uploadForm2' action='' method='post'>
 
   <table class="table table-bordered" style="color:black; margin-top:20px;width:800px;margin-left:45px;" id="infoTable">
   
  
      <tr>
        <td>Loan ID</td>
        <td id="loanId" style="font-weight:bold;"></td>
        <td>Loan Type</td>
        <td id="loanType" style="font-weight:bold;"></td>
        <td>Purchase Price</td>
        <td id="purchasePrice" style="font-weight:bold;"></td>
        
        
        
       
      </tr>
      
     
      <tr>
      
         <td>Down Payment</td>
        <td id="downPayment" style="font-weight:bold;"></td>
        <td>Credit Score</td>
        <td id="creditScore" style="font-weight:bold;">740 +</td>
        
        <td>Property Address</td>
        <td id="propertyAddress" style="font-weight:bold;"></td>
       
      </tr>
   
  </table>
  
  
  
    <h3 style="color:#120d7c;text-align:left;margin-left:40px;margin-top:50px;">Documents To Share</h3> 
  
  <table id="tbId" style="color:black;margin-top:20px;width:800px;margin-left:50px;" class="table table-bordered">
     <th>SNo.</th>
     <th>Name Of Document</th>
     <th>Tag</th>
     <th>File</th>
     
   

             
            
     <tr>
     <td>1</td>
     <td>SSN </td>
      <td>SSN</td>
       <td><a href="#" id="btnShow">View Document</a></td>
      

     </tr>
     
      <tr>
     <td>2</td>
     <td>Passport </td>
      <td>Passport</td>
       <td><a href="#" id="btnShow2">View Document</a></td>
     </tr>
     
     
      <tr>
     <td>3</td>
     <td>Tax Document</td>
      <td>Tax</td>
       <td><a href="#" id="btnShow3">View Document</a></td>
      

     </tr>
     
      <tr>
     <td>4</td>
     <td>Salary </td>
      <td>Salary Document</td>
       <td><a href="#" id="btnShow4">View Document</a></td>
     </tr>
     
     </table>
  
  
  <h3 style="color:#120d7c;text-align:left;margin-left:40px;margin-top:50px;">Available Quotes</h3> 
  
   <table class="table table-bordered" style="color:black; margin-top:20px;width:800px;margin-left:45px;" id="infoTable">
   
  
      <tr>
      <td >SNo</td>
        <td >Name</td>
   
        <td >Term of Loan</td>
        <td >Request For Quote</td>
        
        
        
       
      </tr>
      
     
      <tr>
       <td>1</td>
         <td >Chain Insurance</td>
       
        <td style="font-weight:bold;" id="loanTerm2">30 years</td>
         <td ><input type="checkbox" id="checkbox1"></td>
         <td id="col1"><input type="text" id="checkboxResult1" name="checkboxResult1"></td>
         
         <td id="col2"><input type="text" id="insAddress1" name="insAddress1"></td>
        
       
       
      </tr>
      
      
       <tr>
       <td>2</td>
         <td >Block Insurance</td>
     
        <td style="font-weight:bold;" id="loanTerm">30 years</td>
         <td ><input type="checkbox" id="checkbox2"></td>
         <td id="col3"><input type="text" id="checkboxResult2" name="checkboxResult2"></td>
         
         <td id="col4"><input type="text" id="insAddress2" name="insAddress2"></td>
        
       
       
      </tr>
   
  </table>
  <input type="text" id="loanId2" name="loanId2">
    <input type="text" id="loanTermDetails" name="loanTermDetails">
    <input type="text" id="email" name="email">
    <input type="text" id="custName" name="custName">
      <input type="text" id="walletAddress" name="walletAddress">
  
    <button type="button" class="button" style="width:790px;margin-top:30px;margin-left:50px;"id="UploadIdentityDocuments">Submit Request</button>
  
  
   </form>
  
    </div>
    
    
    <div id="dialog" style="display: none;width:700px;" >
    
        <iframe id="frame" style="width:600px;height:400px;"></iframe>
        

</div>

<div id="dialog2" style="display: none;width:700px;" >
    
      
        
         <iframe id="frame2" style="width:600px;height:400px;"></iframe>

</div>

<div id="dialog3" style="display: none;width:700px;" >
    
      
        
         <iframe id="frame3" style="width:600px;height:400px;"></iframe>

</div>

<div id="dialog4" style="display: none;width:700px;" >
    
      
        
         <iframe id="frame4" style="width:600px;height:400px;"></iframe>

</div>
    
    <div id="successModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
          
              <!-- Modal content-->
              <div class="modal-content"  style="background-color:white;color:black;">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Transaction successfull with Txid</h4>
                </div>
                <div class="modal-body">
                  <p id="txId">.</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
          
            </div>
          </div>


 <div id="waitingModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
          
              <!-- Modal content-->
              <div class="modal-content"  style="background-color:white;color:black;">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Processing Request ...</h4>
                </div>
                <div class="modal-body" style="margin-left:40%;">
                 <img src="assets/img/loading.gif" height="100px;"width="100px;"></img>
                </div>
                
              </div>
          
            </div>
          </div>


    
    <!--  
    <footer id="main_footer">
        <p>Â© 2017 Mphasis Unleash the Next. All rights reserved &nbsp; &nbsp; &nbsp;&nbsp; </p>
    </footer>
    -->
  
</body>

<script>
function goBack() {
    window.history.back();
}
</script>

  <script>
$(document).ready(function(){
	 $("#e").hide();
	 $("#f").show();
	 $("#nav_bar2").hide();
	// $("#checkboxResult1").hide();
	 $("#col1").hide();
	 $("#col2").hide();
	 $("#col3").hide();
	 $("#col4").hide();
	 $("#loanId2").hide();
	 $("#loanTermDetails").hide();
	 $("#email").hide();
	 $("#custName").hide();
	 $("#walletAddress").hide();
	 
	 
	 
	 
	 
	 
	 
	 
	 $("#namanyay-search-box").hide();
	 
	 //var bank=localStorage.getItem("banksName");
	// document.getElementById("bankName").innerHTML = "ABC Bank";
        //$("#main_footer").hide();
       // document.getElementById("jumbotron_header").innerHTML = "Welcome To "+"ABC Bank";
       
	

$("#namanyay-search-btn").on('focus', function () {
	 $("#a").hide();
	 $("#b").hide();
	 $("#c").hide();
	 $("#d").hide();
	 $("#f").hide();
	 $("#e").show();

	
	 $("#namanyay-search-box").show();
   
});


$("#prequalify").click(function(){
    $("#myModal").modal();
});


$("#applyForLoan").click(function(){
    window.location.href="ApplyForLoan.html";
}); 
$("#namanyay-search-box").on('blur', function () {
	 $("#a").show();
	 $("#b").show();
	 $("#c").show();
	 $("#d").show();
	 $("#f").show();
	 $("#e").hide();
	 $("#namanyay-search-box").hide();
	 
  
});
var Name=localStorage.getItem("Name");
var email=localStorage.getItem("email");
var walletAddress=localStorage.getItem("walletAddress");
$("#walletAddress").val(walletAddress);

$("#email").val(email);
$("#custName").val(Name);

//alert(email);
var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};

var loanId = getUrlParameter('loanId');




$("#loanId2").val(loanId);

var walletAddress=localStorage.getItem("walletAddress");
//alert(walletAddress);
var Name2=Name.charAt(0).toUpperCase() + Name.slice(1);
document.getElementById("vat").innerHTML = "Apply Insurance For "+Name2 +" for Loan ID: "+loanId;



 	
// $.get("http://"+ipAddress+":"+port+"/getAllWallets", function(response){
$.get("/getPortfolio?loanId="+loanId+"&walletAddress="+walletAddress, function(response){
// alert(JSON.stringify(response));

	 document.getElementById("loanId").innerHTML = response.message.loanId;
	 document.getElementById("loanType").innerHTML = response.message.propertyType;
	 document.getElementById("purchasePrice").innerHTML = "$ " +response.message.purchasePrice;
	 document.getElementById("downPayment").innerHTML = "$ " +response.message.downPayment;
	 document.getElementById("loanTerm").innerHTML = response.message.loanTerm +" years";
	 document.getElementById("loanTerm2").innerHTML = response.message.loanTerm +" years";
	 $("#loanTermDetails").val(response.message.loanTerm);
	 
	 

	 
	 var ppAdd=response.message.propertyAddress;
	 var ppAdd2=ppAdd.charAt(0).toUpperCase() + ppAdd.slice(1);
	 var replaced2 = ppAdd2.split('_').join(' ');
	 document.getElementById("propertyAddress").innerHTML = replaced2;
	 
	 
	 
});

$.get("/getInsuranceCompanies", function(response2){
	// alert(JSON.stringify(response2[0]));
$("#insAddress1").val(response2[0].accountAddress);
$("#insAddress2").val(response2[1].accountAddress);
	// alert($("#insAddress1").val());
		 
		 
		 
	});


$('#checkbox1').click(function(){
    if($(this).is(":checked")){
      //  alert("Checkbox is checked.");
        $("#checkboxResult1").val("Yes");
        //alert($("#checkboxResult1").val());
    }
    else if($(this).is(":not(:checked)")){
       // alert("Checkbox is unchecked.");
        $("#checkboxResult1").val("No");
      //  alert($("#checkboxResult1").val());
    }
});


$('#checkbox2').click(function(){
    if($(this).is(":checked")){
      //  alert("Checkbox is checked.");
        $("#checkboxResult2").val("Yes");
     //   alert($("#checkboxResult2").val());
    }
    else if($(this).is(":not(:checked)")){
       // alert("Checkbox is unchecked.");
        $("#checkboxResult2").val("No");
       // alert($("#checkboxResult2").val());
    }
});

});




        


</script>

<script type="text/javascript">
    $(document).ready(function() {
    	
    	var getUrlParameter = function getUrlParameter(sParam) {
    	    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
    	        sURLVariables = sPageURL.split('&'),
    	        sParameterName,
    	        i;

    	    for (i = 0; i < sURLVariables.length; i++) {
    	        sParameterName = sURLVariables[i].split('=');

    	        if (sParameterName[0] === sParam) {
    	            return sParameterName[1] === undefined ? true : sParameterName[1];
    	        }
    	    }
    	};

    	var loanId = getUrlParameter('loanId');
    //	var ipAddress= localStorage.getItem("ipAddress");
    	//var port= localStorage.getItem("port");
    	//var port2= localStorage.getItem("port2");

        $('#btnShow').click(function(){
        	$.get("/getDocumentHashByLoanId?loanId="+loanId, function(response){
        		  // alert(JSON.stringify(response.people));
        		//alert(JSON.stringify(response));
        		
        		 
        		// document.getElementById("propertyAddress").innerHTML = response.message.propertyAddress;
        		
        	
            $("#dialog").dialog({
               
                    maxWidth:600,
                    maxHeight: 450,
                    width: 600,
                    height: 450,
                    modal: true
                    
                });
          //  $("#frame").attr("src", "/ipfs/"+response.message.ssnHash);

            $.get("/ipfs?fileHash=" + response.message.ssnHash, function (response) {
				$("#frame").attr("src", response.ipfsUrl);
			});
        }); 
        });
        
        $('#btnShow2').click(function(){
        	$.get("/getDocumentHashByLoanId?loanId="+loanId, function(response){
        		  // alert(JSON.stringify(response.people));
        		//alert(JSON.stringify(response));
        		
        		 
        		// document.getElementById("propertyAddress").innerHTML = response.message.propertyAddress;
        		
        	
            $("#dialog2").dialog({
               
                    maxWidth:600,
                    maxHeight: 450,
                    width: 600,
                    height: 450,
                    modal: true
                    
                });
           // $("#frame2").attr("src", "/ipfs/"+response.message.passportHash);

           $.get("/ipfs?fileHash=" + response.message.passportHash, function (response) {
				$("#frame2").attr("src", response.ipfsUrl);
			});
        }); 
        });
        
        
        $('#btnShow3').click(function(){
        	$.get("/getDocumentHashByLoanId?loanId="+loanId, function(response){
        		  // alert(JSON.stringify(response.people));
        		//alert(JSON.stringify(response));
        		
        		 
        		// document.getElementById("propertyAddress").innerHTML = response.message.propertyAddress;
        		
        	
            $("#dialog3").dialog({
               
                    maxWidth:600,
                    maxHeight: 450,
                    width: 600,
                    height: 450,
                    modal: true
                    
                });
     //       $("#frame3").attr("src", "/ipfs/"+response.message.taxReturnsHash);

            $.get("/ipfs?fileHash=" + response.message.taxReturnsHash, function (response) {
				$("#frame3").attr("src", response.ipfsUrl);
			});
        }); 
        });
        
        
        
        $('#btnShow4').click(function(){
        	$.get("/getDocumentHashByLoanId?loanId="+loanId, function(response){
        		  // alert(JSON.stringify(response.people));
        		//alert(JSON.stringify(response));
        		
        		 
        		// document.getElementById("propertyAddress").innerHTML = response.message.propertyAddress;
        		
        	
            $("#dialog4").dialog({
               
                    maxWidth:600,
                    maxHeight: 450,
                    width: 600,
                    height: 450,
                    modal: true
                    
                });
         //   $("#frame4").attr("src", "/ipfs/"+response.message.salaryDetailsHash);
            $.get("/ipfs?fileHash=" + response.message.salaryDetailsHash, function (response) {
				$("#frame4").attr("src", response.ipfsUrl);
			});
        }); 
        });
    });
</script>




<script>
function MyFunction(){
	$("#nav_bar2").show();
}

</script>

<script src="assets/js/GetQuote.js"></script> 



</html>
